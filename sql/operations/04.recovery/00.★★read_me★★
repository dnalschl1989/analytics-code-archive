# ♻️ BigQuery Table Recovery (Time Travel)

이 폴더는 BigQuery의 **Time Travel 기능**을 활용하여  
테이블을 과거 특정 시점 상태로 복구하기 위한 운영용 SQL을 관리합니다.

---

## 🎯 Purpose
- 실수로 변경/삭제된 테이블 복구
- 배치 오류 발생 시 과거 데이터 스냅샷 확보
- 운영 사고 대응 및 데이터 검증

---

## ⏱ Time Travel Constraints
- 최대 **7일 이내** 시점만 조회 가능
- 테이블이 최소 1회 이상 저장된 이력이 있어야 함
- 데이터셋/프로젝트 설정에 따라 보존 기간이 다를 수 있음

---

## 📄 Included Queries

### `restore_table_with_time_travel_bigquery.sql`
- `FOR SYSTEM_TIME AS OF` 구문을 사용하여
  특정 시점의 테이블 상태를 조회/복구
- 일반적으로 TMP 테이블로 복구 후 검증 수행

---

## ⚠️ Operational Guidelines
- 운영 테이블에 직접 `CREATE OR REPLACE` 적용 ❌
- 반드시 임시 테이블로 복구 후 데이터 검증 ⭕
- 복구 시점(TIMESTAMP)은 UTC 기준임에 유의
- 복구 쿼리 실행 전 영향 범위 공유 권장

---

## 🧠 Notes
- Time Travel은 BigQuery의 강력한 안전 장치이지만
  **영구 백업을 대체하지는 않음**
- 장기 보존이 필요한 테이블은 별도 백업 정책 필요
